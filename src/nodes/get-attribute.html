<script type="text/html" data-template-name="get-attribute">
	<div class="form-row">
		<label for="node-input-name"><i class="fa fa-globe"></i> <span>Name</span></label>
		<input type="text" id="node-input-name">
	</div>
	<div class="form-row">
		<label for="node-input-attribute"><i class="fa fa-empire"></i> <span>Attribute</span></label>
		<input type="text" id="node-input-attribute">
	</div>
	<div class="form-row">
		<label for="node-input-expected"><i class="fa fa-empire"></i> <span>Expected</span></label>
		<input type="text" id="node-input-expected">
	</div>
	<div class="form-row">
		<label for="node-input-selector"><i class="fa fa-empire"></i> <span>By</span></label>
		<select id="node-input-selector" style="width:125px !important">
			<option value="id">id</option>
			<option value="name">name</option>
			<option value="link">link</option>
			<option value="xpath">xpath</option>
			<option value="tagName">tagName</option>
			<option value="className">className</option>
			<option value="linkText">linkText</option>
			<option value="cssSelector">cssSelector</option>
		</select>
	</div>
	<div class="form-row">
		<label for="node-input-target"><i class="fa fa-empire"></i> <span>Target</span></label>
		<input type="text" id="node-input-target">
	</div>
	<div class="form-row">
		<label for="node-input-timeout"><i class="fa fa-empire"></i> <span>Timeout</span></label>
		<input type="text" id="node-input-timeout" value="1000">
	</div>
	<div class="form-row">
		<label for="node-input-waitFor"><i class="fa fa-empire"></i> <span>Wait For</span></label>
		<input type="text" id="node-input-waitFor" value="00">
	</div>
</script>

<script type="text/html" data-help-name="get-attribute">
	<p>Get the attribute from <code>attribute</code> of the <code>msg.element</code> or after waiting for the expected element is located.</p>
	<strong>Inputs:</strong>
	<p><ul>
		<li><a>Attribute</a>: specify the attribute to get. The <code>msg.attribute</code> will override the <code>Attribute</code> field if set.</li>
		<li><a>Expected</a>: specify the expected value to cpmpare. The <code>msg.expected</code> field if set.</li>
		<li><a>By</a>: specify the way to find an element by selector. The <code>msg.selector</code> will override the <code>By</code> field if set.</li>
		<li><a>Target</a>: specify the selector's value to lookup. The<code>msg.target</code> will override the <code>Target</code> field if set.</li>
		<li><a>Timeout</a>: specify the timeout during lookup operation. The <code>msg.timeout</code> will override the <code>Timeout</code> field if set.</li>
		<li><a>Wait For</a>: specify the time to wait before looing up. The <code>msg.waitFor</code> will override the <code>Wait For</code> field if set.</li>
	</ul></p>	
	<p>If the <code>msg.filename</code> is passed through, the <code>msg.payload</code> will be written into the file path.</p>
	<strong>Outputs:</strong>
	<p><code>msg.error</code> When the object is unexpected or cannot find element, this node generates the error with detail information</p>
	<p><code>msg.element</code> If the element is found, it will be passed though the msg object to the next node.</p>
	<p><code>msg.payload</code> contains the result of the <code>value</code> attribute.</p>
</script>

<script type="text/javascript">
	RED.nodes.registerType('get-attribute', {
		category : 'wd2',
		defaults : {
			name : {
				value : ""
			},
			attribute : {
				value : ""
			},
			expected : {
				value : ""
			},
			selector : {
				value : ""
			},
			target : {
				value : ""
			},
			timeout : {
				value : 1000,
				validate : RED.validators.number()
			},
			waitFor : {
				value : 500,
				validate : RED.validators.number()
			},
			savetofile : {
				value : false
			}
		},
		color : "#47B6EE",
		inputs : 1,
		outputs : 2,
		icon : "font-awesome/fa-quote-right",
		label : function() {
			return this.name || "Get Attribute";
		},
		labelStyle : function() {
			return this.name ? "node_label_italic" : "";
		}
	}); 
</script>